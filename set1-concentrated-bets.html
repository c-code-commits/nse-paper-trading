<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Set 1 â€” Concentrated Bets Tracker</title>
<style>
:root{--bg:#0f1117;--card:#161b22;--bdr:#21262d;--tx:#e1e4e8;--mt:#8b949e;--dm:#484f58;--gn:#3fb950;--rd:#f85149;--bl:#58a6ff;--yl:#d29922;--gnb:#0d4429;--rdb:#3d1e20;--blb:#0c2d6b}
[data-theme="light"]{--bg:#f6f8fa;--card:#fff;--bdr:#d0d7de;--tx:#1f2328;--mt:#656d76;--dm:#8b949e;--gn:#1a7f37;--rd:#cf222e;--bl:#0969da;--yl:#9a6700;--gnb:#dafbe1;--rdb:#ffebe9;--blb:#ddf4ff}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--tx);line-height:1.5;padding:12px;max-width:1000px;margin:0 auto;font-size:14px;transition:background .3s,color .3s}
a{color:var(--bl);text-decoration:none}
.hdr{text-align:center;padding:16px 0 8px;border-bottom:1px solid var(--bdr)}
.hdr h1{font-size:1.3rem;font-weight:600}
.hdr .meta{font-size:.75rem;color:var(--mt);margin-top:4px}
.tb{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px;margin:10px 0;font-size:.75rem;color:var(--mt)}
.tbr{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.mb{display:inline-block;padding:2px 10px;border-radius:12px;font-size:.65rem;font-weight:700}
.mo{background:var(--gnb);color:var(--gn)}.mc{background:var(--rdb);color:var(--rd)}
.nav{text-align:center;margin:8px 0;font-size:.78rem}
.sum{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:8px;margin:12px 0}
.cd{background:var(--card);border:1px solid var(--bdr);border-radius:8px;padding:12px;text-align:center}
.cd .l{font-size:.65rem;color:var(--mt);text-transform:uppercase;letter-spacing:.5px}
.cd .v{font-size:1.15rem;font-weight:700;margin-top:2px}
.pos{color:var(--gn)}.neg{color:var(--rd)}.neu{color:var(--mt)}
.btn{background:var(--card);color:var(--tx);border:1px solid var(--bdr);padding:4px 12px;border-radius:6px;cursor:pointer;font-size:.72rem}
.btn:hover{background:var(--bdr)}
.sc{background:var(--card);border:1px solid var(--bdr);border-radius:8px;margin-bottom:10px;overflow:hidden}
.sh{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid var(--bdr);flex-wrap:wrap;gap:4px}
.sn{font-weight:600;font-size:.9rem}.tk{color:var(--mt);font-size:.72rem;font-family:monospace}
.bg{padding:2px 8px;border-radius:10px;font-size:.6rem;font-weight:700;text-transform:uppercase;white-space:nowrap}
.bo{background:var(--gnb);color:var(--gn)}.bn{background:var(--blb);color:var(--bl)}.br{background:var(--rdb);color:var(--rd)}.bt{background:#1b6b2e;color:#7ee787}.bs{background:#6e1b1b;color:#ff7b72}.bp{background:#3d2e00;color:var(--yl)}
.sb{padding:10px 14px}
.sg{display:grid;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:6px;margin-bottom:8px}
.sg .it .ll{font-size:.6rem;color:var(--mt);text-transform:uppercase}.sg .it .vv{font-size:.82rem;font-weight:600}
.pw{margin:6px 0}.pll{display:flex;justify-content:space-between;font-size:.55rem;color:var(--mt);margin-bottom:2px}
.pb{position:relative;height:7px;background:var(--bdr);border-radius:4px;overflow:visible}
.pf{height:100%;border-radius:4px;transition:width .5s}.pmk{position:absolute;top:-3px;width:3px;height:13px;background:var(--tx);border-radius:2px;transform:translateX(-50%)}
.spk{margin:6px 0}.spk svg{width:100%;height:30px}
.tmb{margin:6px 0}.tml{display:flex;justify-content:space-between;font-size:.55rem;color:var(--mt);margin-bottom:2px}
.tmt{height:5px;background:var(--bdr);border-radius:3px;overflow:hidden}.tmf{height:100%;background:var(--bl);border-radius:3px}
.sec{margin-top:20px;border-top:1px solid var(--bdr);padding-top:14px}
.sec h2{font-size:.95rem;margin-bottom:10px;display:flex;align-items:center;justify-content:space-between}
.ai{background:var(--card);border:1px solid var(--bdr);border-radius:8px;padding:12px;margin-bottom:8px}
.ai h3{font-size:.8rem;color:var(--bl);margin-bottom:4px}.ai p{font-size:.72rem;color:var(--mt);line-height:1.6}.ai .sl{font-size:.72rem;margin-top:4px;font-weight:600}
.ct{font-size:.7rem;color:var(--mt);font-weight:400}
.bkg{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px}
.bki{background:var(--card);border:1px solid var(--bdr);border-radius:8px;padding:10px}
.bki h4{font-size:.78rem;margin-bottom:4px}.bki .bkp{font-size:.82rem;font-weight:600;margin:2px 0}.bki .bkm{font-size:.65rem;color:var(--mt)}
.ld{text-align:center;padding:30px;color:var(--mt)}
.sp{display:inline-block;width:18px;height:18px;border:2px solid var(--bdr);border-top-color:var(--bl);border-radius:50%;animation:spn .7s linear infinite;margin-right:6px;vertical-align:middle}
@keyframes spn{to{transform:rotate(360deg)}}
.er{background:var(--rdb);border-radius:6px;padding:8px;text-align:center;color:var(--rd);font-size:.75rem;margin:8px 0}
.ft{text-align:center;padding:16px 0;font-size:.65rem;color:var(--dm);border-top:1px solid var(--bdr);margin-top:16px}
.nf{position:fixed;top:0;left:0;right:0;padding:10px;text-align:center;font-size:.8rem;font-weight:600;z-index:999;display:none;cursor:pointer}
.nt{background:#1b6b2e;color:#7ee787}.ns{background:#6e1b1b;color:#ff7b72}
@media(max-width:500px){.sg{grid-template-columns:repeat(3,1fr)}.sum{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>
<div id="nf" class="nf" onclick="this.style.display='none'"></div>
<div class="hdr"><h1>Set 1 &#8212; Concentrated Bets</h1>
<div class="meta">Paper Purchase: 20 Feb 2026 &#160;|&#160; Capital: &#8377;1,00,000 &#160;|&#160; 4 trades @ &#8377;25,000 <span id="mbi" class="mb mc">LOADING</span></div></div>
<div class="nav"><a href="set2-under1000.html">Set 2 &#8212; Under &#8377;1,000 &#8594;</a> &#160;|&#160; <a href="index.html">Combined View</a></div>
<div class="sum">
<div class="cd"><div class="l">Invested</div><div class="v" id="sI">--</div></div>
<div class="cd"><div class="l">Current Value</div><div class="v" id="sC">--</div></div>
<div class="cd"><div class="l">Gross P&amp;L</div><div class="v" id="sP">--</div></div>
<div class="cd"><div class="l">Net (post-tax)</div><div class="v" id="sN">--</div></div>
<div class="cd"><div class="l">Gross Return</div><div class="v" id="sR">--</div></div>
<div class="cd"><div class="l">Net Return</div><div class="v" id="sNR">--</div></div>
</div>
<div class="tb"><span id="lu">Last updated: --</span>
<div class="tbr"><span id="at"></span>
<button class="btn" onclick="go()">&#8635; Refresh</button>
<button class="btn" onclick="srt()">&#8645; Sort P&amp;L</button>
<button class="btn" onclick="csv()">&#8615; CSV</button>
<button class="btn" onclick="thm()">&#9681; Theme</button></div></div>
<div id="stk"><div class="ld"><span class="sp"></span>Fetching live prices...</div></div>
<div class="sec"><h2>Backup Trades <span class="ct" id="bks"></span></h2><div class="bkg" id="bkg"><div class="ld"><span class="sp"></span></div></div></div>
<div class="sec"><h2>Performance vs Expectations <span class="ct" id="cc"></span></h2><div id="ac"></div></div>
<div class="ft">Data: Yahoo Finance via allorigins.win &#8226; Pen-and-paper only &#8226; Not financial advice<br>Source: 17 Feb 2026</div>
<script>
var S=[
{n:"Dr Reddy's Laboratories",tk:"DRREDDY",sy:"DRREDDY.NS",bp:1285.0,q:19,tg:1530,sl:1180,er:"+19%",et:"3-6 weeks",
ct:"Generic Wegovy India launch \u2014 Delhi HC ban lifts March 2026. 12M pens year 1. Biosimilar abatacept ($4.2B market) filed for US FDA Dec 2025. Rituximab licensed to Fresenius Kabi.",
ex:"React March on Wegovy ban lift. Rs.1,400+ on upgrades, Rs.1,530 by April-May. BofA target Rs.1,530.",
cs:[{n:"Wegovy India ban lifts",d:"2026-03-15"},{n:"Q4 FY26 results",d:"2026-04-20"},{n:"Abatacept FDA decision",d:"2026-12-31"}]},
{n:"Coforge Ltd",tk:"COFORGE",sy:"COFORGE.NS",bp:1359.80,q:18,tg:1650,sl:1260,er:"+19.7%",et:"6-10 weeks",
ct:"$1.72B order book. Q3: rev +28.5%, profit +55.5% YoY. AI launches: CodeInsightAI, EvolveOps.AI, Forge-X. Salesforce WellnessAI.",
ex:"IT recovery to Rs.1,450-1,500 by March. Q4 (April) strong on order book, Rs.1,600-1,700. MO target Rs.2,400, Nomura Rs.1,900.",
cs:[{n:"IT sector rotation",d:"2026-03-15"},{n:"Q4 FY26 results",d:"2026-04-20"}]},
{n:"Coal India Ltd",tk:"COALINDIA",sy:"COALINDIA.NS",bp:420.70,q:59,tg:500,sl:380,er:"+18.5%+div",et:"2-4 months",
ct:"Dividend 6-8% yield. P/E 8.7x, ROCE 48%. Chile lithium/copper subsidiary. 3GW solar by 2029. Coal-to-ammonium nitrate Rs.3,190Cr. 5 new mines.",
ex:"Post-dividend March stabilization. Energy recovery Rs.440-460. Q4 (April) e-auction surprise. Final div May-June to Rs.500. Lithium to Rs.580+.",
cs:[{n:"Energy sector recovery",d:"2026-03-15"},{n:"Q4 FY26 results",d:"2026-04-20"},{n:"Final FY26 dividend",d:"2026-06-15"}]},
{n:"GHCL Limited",tk:"GHCL",sy:"GHCL.NS",bp:494.50,q:50,tg:660,sl:500,er:"+17.9%\u201346.4%",et:"2-4 months",
ct:"Anti-dumping petition vs Chinese soda ash. Rs.6,500Cr Kutch plant doubles to 2.3MT. Rs.350Cr vacuum salt + bromine. Net cash Rs.861Cr.",
ex:"Anti-dumping = binary catalyst, +15-20% overnight. Cycle bottom, forward P/E 7.83x. Bull case Rs.820.",
cs:[{n:"Anti-dumping duty decision",d:"2026-04-01"},{n:"Q4 FY26 results",d:"2026-04-20"},{n:"Greenfield construction",d:"2026-08-01"}]}
];
var BK=[
{n:"GSPL",sy:"GSPL.NS",tg:365,nt:"Dahej LNG expansion March 2026 + Anjar-Palanpur pipeline"},
{n:"HCL Tech",sy:"HCLTECH.NS",tg:1700,nt:"AI Force 100 clients by March + Cisco partnership"},
{n:"Sun TV",sy:"SUNTV.NS",tg:700,nt:"P/E 14.3x, ROCE 20.4%, South India media monopoly"},
{n:"Maithan Alloys",sy:"MAITHANALL.NS",tg:1250,nt:"P/E 6.9x, P/B 0.71x. Steel cycle upturn"}
];
var PX="https://api.allorigins.win/get?url=",tm=null,sd=0,LR=null,TAX=.208,TXC=345,D0=new Date("2026-02-20"),WD=120;
function fI(v){if(v==null||isNaN(v))return"--";var g=v<0,a=Math.abs(v);return(g?"-":"")+"\u20B9"+a.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}
function fP(v){if(v==null||isNaN(v))return"--";return(v>=0?"+":"")+v.toFixed(2)+"%"}
function cl(v){return v>0.01?"pos":v<-0.01?"neg":"neu"}
function ism(){var d=new Date(),i=new Date(d.toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),w=i.getDay(),m=i.getHours()*60+i.getMinutes();return w>0&&w<6&&m>=555&&m<=930}
function dh(){return Math.max(0,Math.floor((Date.now()-D0.getTime())/864e5))}
function dtc(d){return Math.ceil((new Date(d)-Date.now())/864e5)}
async function fp(sy,rt){rt=rt||0;try{
var u=PX+encodeURIComponent("https://query1.finance.yahoo.com/v8/finance/chart/"+sy+"?interval=1d&range=1mo");
var r=await fetch(u),w=await r.json(),d=JSON.parse(w.contents),rs=d.chart.result[0],m=rs.meta,q=rs.indicators.quote[0];
var p=m.regularMarketPrice,pc=m.chartPreviousClose,hi=m.regularMarketDayHigh||p,lo=m.regularMarketDayLow||p;
var cs=[];if(q&&q.close)for(var x=0;x<q.close.length;x++)if(q.close[x]!=null)cs.push(q.close[x]);
return{p:p,pc:pc,dc:p-pc,dcp:((p-pc)/pc)*100,hi:hi,lo:lo,w5h:m.fiftyTwoWeekHigh,w5l:m.fiftyTwoWeekLow,cs:cs}
}catch(e){if(rt<2){await new Promise(function(r){setTimeout(r,1500)});return fp(sy,rt+1)}throw e}}
function svg(cs,bp){if(!cs||cs.length<2)return"";var mn=Math.min.apply(null,cs),mx=Math.max.apply(null,cs);if(mx===mn){mx+=1;mn-=1}
var W=200,H=26,pts=[];for(var i=0;i<cs.length;i++){var x=(i/(cs.length-1))*W,y=H-((cs[i]-mn)/(mx-mn))*H;pts.push(x.toFixed(1)+","+y.toFixed(1))}
var c=cs[cs.length-1]>=bp?"var(--gn)":"var(--rd)",by=Math.max(0,Math.min(H,H-((bp-mn)/(mx-mn))*H));
return'<svg viewBox="0 0 '+W+' '+H+'" preserveAspectRatio="none"><line x1="0" y1="'+by.toFixed(1)+'" x2="'+W+'" y2="'+by.toFixed(1)+'" stroke="var(--mt)" stroke-width="0.5" stroke-dasharray="3,3"/><polyline fill="none" stroke="'+c+'" stroke-width="1.5" points="'+pts.join(" ")+'"/></svg>'}
function gs(c,bp,tg,sl){if(c<=sl)return{t:"HIT SL",c:"bs"};if(c>=tg)return{t:"TARGET HIT",c:"bt"};
if(((c-bp)/bp)*100>=12)return{t:"BOOK PARTIAL",c:"bp"};
if(((tg-c)/(tg-bp))*100<=20)return{t:"NEAR TARGET",c:"bn"};
if(((c-sl)/(bp-sl))*100<=30)return{t:"AT RISK",c:"br"};return{t:"ON TRACK",c:"bo"}}
function pp(c,sl,tg){return Math.max(0,Math.min(100,((c-sl)/(tg-sl))*100))}
function pc(c,bp,sl){if(c>=bp)return"var(--gn)";return((bp-c)/(bp-sl))>0.5?"var(--rd)":"var(--yl)"}
function ntf(m,t){if("Notification"in window&&Notification.permission==="granted")new Notification("NSE Tracker",{body:m});
var e=document.getElementById("nf");e.textContent=m;e.className="nf "+(t==="t"?"nt":"ns");e.style.display="block";setTimeout(function(){e.style.display="none"},8000)}
function ren(R){try{if("Notification"in window&&Notification.permission==="default")Notification.requestPermission()}catch(e){}
var tI=0,tC=0,its=[];
S.forEach(function(s,i){var inv=s.bp*s.q;tI+=inv;var cv=inv,p=null,r=R[i],dc=0,dcp=0,hi=null,lo=null,w5h=null,w5l=null,cs=[],st={t:"LOADING",c:"bo"},em="";
if(r&&r.p){p=r.p;cv=p*s.q;dc=r.dc;dcp=r.dcp;hi=r.hi;lo=r.lo;w5h=r.w5h;w5l=r.w5l;cs=r.cs;st=gs(p,s.bp,s.tg,s.sl);
if(st.t==="TARGET HIT")ntf(s.tk+" hit target at "+fI(p)+"!","t");if(st.t==="HIT SL")ntf(s.tk+" hit SL at "+fI(p)+"!","s")}
else if(r&&r.error)em=r.error;
tC+=cv;its.push({s:s,p:p,cv:cv,inv:inv,pl:cv-inv,plp:((cv-inv)/inv)*100,dc:dc,dcp:dcp,hi:hi,lo:lo,w5h:w5h,w5l:w5l,cs:cs,st:st,em:em})});
if(sd!==0)its.sort(function(a,b){return sd*(b.plp-a.plp)});
var h="",dy=dh();
its.forEach(function(d){var s=d.s,p=d.p,pos=p?pp(p,s.sl,s.tg):pp(s.bp,s.sl,s.tg),bps=pp(s.bp,s.sl,s.tg),fc=p?pc(p,s.bp,s.sl):"var(--dm)",tp=Math.min(100,(dy/WD)*100);
var np=d.pl>0?d.pl*(1-TAX):d.pl;
h+='<div class="sc"><div class="sh"><div><span class="sn">'+s.n+'</span> <span class="tk">'+s.tk+'</span></div><span class="bg '+d.st.c+'">'+d.st.t+'</span></div><div class="sb">';
if(d.em)h+='<div class="er">'+d.em+'</div>';
h+='<div class="sg">';
h+='<div class="it"><div class="ll">Qty</div><div class="vv">'+s.q+'</div></div>';
h+='<div class="it"><div class="ll">Buy</div><div class="vv">'+fI(s.bp)+'</div></div>';
h+='<div class="it"><div class="ll">Current</div><div class="vv '+(p?cl(p-s.bp):"")+'">'+( p?fI(p):"--")+'</div></div>';
h+='<div class="it"><div class="ll">Day Chg</div><div class="vv '+cl(d.dc)+'">'+(p?fP(d.dcp):"--")+'</div></div>';
h+='<div class="it"><div class="ll">Day H/L</div><div class="vv" style="font-size:.7rem">'+(d.hi?fI(d.hi):"--")+'<br>'+(d.lo?fI(d.lo):"--")+'</div></div>';
h+='<div class="it"><div class="ll">52W H/L</div><div class="vv" style="font-size:.7rem">'+(d.w5h?fI(d.w5h):"--")+'<br>'+(d.w5l?fI(d.w5l):"--")+'</div></div>';
h+='<div class="it"><div class="ll">Gross P&L</div><div class="vv '+cl(d.pl)+'">'+(p?fI(d.pl):"--")+'</div></div>';
h+='<div class="it"><div class="ll">Return</div><div class="vv '+cl(d.plp)+'">'+(p?fP(d.plp):"--")+'</div></div>';
h+='<div class="it"><div class="ll">Net P&L</div><div class="vv '+cl(np)+'">'+(p?fI(np):"--")+'</div></div>';
h+='</div><div class="spk">'+svg(d.cs,s.bp)+'</div>';
h+='<div class="pw"><div class="pll"><span>SL '+fI(s.sl)+'</span><span>Buy '+fI(s.bp)+'</span><span>Tgt '+fI(s.tg)+'</span></div>';
h+='<div class="pb"><div class="pf" style="width:'+pos+'%;background:'+fc+'"></div><div class="pmk" style="left:'+bps+'%"></div></div></div>';
h+='<div class="tmb"><div class="tml"><span>Day '+dy+'/'+WD+'</span>';
var uc=(s.cs||[]).filter(function(c){return dtc(c.d)>0}).sort(function(a,b){return dtc(a.d)-dtc(b.d)});
if(uc.length)h+='<span>\u23F3 '+uc[0].n+' ('+dtc(uc[0].d)+'d)</span>';
h+='</div><div class="tmt"><div class="tmf" style="width:'+tp+'%"></div></div></div></div></div>'});
document.getElementById("stk").innerHTML=h;
var tPL=tC-tI,tPP=(tPL/tI)*100,nt=tPL>0?tPL*(1-TAX)-TXC:tPL-TXC,ntp=(nt/tI)*100;
document.getElementById("sI").textContent=fI(tI);
var e;e=document.getElementById("sC");e.textContent=fI(tC);e.className="v "+cl(tPL);
e=document.getElementById("sP");e.textContent=fI(tPL);e.className="v "+cl(tPL);
e=document.getElementById("sN");e.textContent=fI(nt);e.className="v "+cl(nt);
e=document.getElementById("sR");e.textContent=fP(tPP);e.className="v "+cl(tPP);
e=document.getElementById("sNR");e.textContent=fP(ntp);e.className="v "+cl(ntp);
rA(R,tPP);localStorage.setItem("s1c",JSON.stringify({R:R,t:Date.now()}))}
function rA(R,tPP){var h="",dy=dh(),pa=0,up=0;
S.forEach(function(s,i){var r=R[i],st="";
if(r&&r.p){var p=r.p,pl=((p-s.bp)/s.bp*100).toFixed(2),toT=((s.tg-p)/(s.tg-s.bp)*100).toFixed(0),toS=((p-s.sl)/(s.bp-s.sl)*100).toFixed(0);
if(p>=s.tg)st='<span class="pos">TARGET ACHIEVED '+fI(p)+' after '+dy+'d (expected '+s.et+'). Exit and rotate.</span>';
else if(p<=s.sl)st='<span class="neg">STOP-LOSS HIT '+fI(p)+' after '+dy+'d. Exit, rotate to backup.</span>';
else if(parseFloat(pl)>=12)st='<span class="pos">UP '+pl+'% \u2014 BOOK PARTIAL: sell '+Math.round(s.q*.4)+' shares, hold '+Math.round(s.q*.6)+'.</span>';
else if(parseFloat(pl)>0)st='<span class="pos">UP '+pl+'% ('+dy+'d). '+toT+'% to target. On track ('+s.et+').</span>';
else st='<span class="neg">DOWN '+pl+'% ('+dy+'d). '+toS+'% above SL. '+(parseFloat(toS)<40?"Risk zone.":"Normal, hold.")+'</span>'}
else st='<span class="neu">Unavailable.</span>';
var ch="";(s.cs||[]).forEach(function(c){var d=dtc(c.d);if(d>0){ch+='<br>\u23F3 '+c.n+': <b>'+d+'d away</b>';up++}else{ch+='<br>\u2705 '+c.n+': <b>passed</b>';pa++}});
h+='<div class="ai"><h3>'+s.n+' ('+s.tk+')</h3><p><b>Catalyst:</b> '+s.ct+ch+'</p><p><b>Expected:</b> '+s.ex+'</p><div class="sl">'+st+'</div></div>'});
document.getElementById("cc").textContent=pa+" passed, "+up+" upcoming";
var ov;if(tPP>=15)ov='<span class="pos">EXCELLENT +'+tPP.toFixed(2)+'% \u2014 above base-case +11.4%.</span>';
else if(tPP>=5)ov='<span class="pos">GOOD +'+tPP.toFixed(2)+'% \u2014 on track for +11-15%.</span>';
else if(tPP>=0)ov='<span class="neu">NEUTRAL +'+tPP.toFixed(2)+'%. Catalysts Mar-Apr. Hold.</span>';
else if(tPP>=-5)ov='<span class="neg">DRAWDOWN '+tPP.toFixed(2)+'%. Modeled worst -9.3%. Hold.</span>';
else ov='<span class="neg">DEEP DRAWDOWN '+tPP.toFixed(2)+'%. Exit SL hits, rotate to backups.</span>';
h+='<div class="ai"><h3>Overall</h3><p>Best +15%, Base +11.4% (3/4), Worst +1.3%.</p><div class="sl">'+ov+'</div></div>';
document.getElementById("ac").innerHTML=h}
async function lbk(){var h="",R=await Promise.all(BK.map(async function(b){try{return await fp(b.sy)}catch(e){return{p:null}}}));
BK.forEach(function(b,i){var r=R[i],p=r&&r.p?r.p:null,up=p?((b.tg-p)/p*100).toFixed(1):null;
h+='<div class="bki"><h4>'+b.n+' <span class="tk">'+b.sy.replace(".NS","")+'</span></h4>';
h+='<div class="bkp">'+(p?fI(p):"--")+' <span style="font-size:.65rem;color:var(--mt)">\u2192 '+fI(b.tg)+(up?' ('+up+'%)':'')+'</span></div>';
h+='<div class="bkm">'+b.nt+'</div></div>'});
document.getElementById("bkg").innerHTML=h;document.getElementById("bks").textContent="Live prices"}
async function go(){var b=document.getElementById("mbi"),o=ism();b.textContent=o?"MARKET OPEN":"MARKET CLOSED";b.className="mb "+(o?"mo":"mc");
var ca=localStorage.getItem("s1c");if(ca){try{var c=JSON.parse(ca);if(Date.now()-c.t<3e5)ren(c.R)}catch(e){}}
document.getElementById("stk").innerHTML='<div class="ld"><span class="sp"></span>Fetching...</div>';
var R=await Promise.all(S.map(async function(s){try{return await fp(s.sy)}catch(e){return{error:e.message,p:null}}}));
LR=R;ren(R);document.getElementById("lu").textContent="Updated: "+new Date().toLocaleString("en-IN",{timeZone:"Asia/Kolkata"});
if(tm)clearTimeout(tm);var el=document.getElementById("at");
if(ism()){el.textContent="Auto: 60s ";tm=setTimeout(go,6e4)}else el.textContent="Auto paused ";lbk()}
function srt(){sd=sd===1?-1:1;if(LR)ren(LR)}
function csv(){if(!LR)return;var c="Stock,Ticker,Qty,Buy,Current,DayChg%,GrossPL,Return%,NetPL,Target,SL,Status\n";
S.forEach(function(s,i){var r=LR[i],p=r&&r.p?r.p:0,pl=(p-s.bp)*s.q,pp=((p-s.bp)/s.bp*100),np=pl>0?pl*(1-TAX):pl;
c+='"'+s.n+'",'+s.tk+','+s.q+','+s.bp+','+p+','+(r&&r.dcp?r.dcp.toFixed(2):0)+','+pl.toFixed(2)+','+pp.toFixed(2)+','+np.toFixed(2)+','+s.tg+','+s.sl+','+(p?gs(p,s.bp,s.tg,s.sl).t:"N/A")+'\n'});
var b=new Blob([c],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(b);a.download="set1_"+new Date().toISOString().slice(0,10)+".csv";a.click()}
function thm(){var b=document.body;b.dataset.theme=b.dataset.theme==="light"?"":"light";localStorage.setItem("thm",b.dataset.theme||"dark")}
(function(){if(localStorage.getItem("thm")==="light")document.body.dataset.theme="light"})();
go();
</script>
</body>
</html>
